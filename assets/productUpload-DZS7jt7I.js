import"./common-D2-4OkSc.js";import{r as y}from"./api-DvCEykNh.js";const h=document.getElementById("product-form"),p=document.getElementById("img-input"),i=document.getElementById("preview-img"),E=document.getElementById("upload-icon"),l=document.querySelectorAll(".shipping-btn");let m="PARCEL";p.addEventListener("change",t=>{const n=t.target.files[0];if(n){const o=new FileReader;o.onload=a=>{i.src=a.target.result,i.style.display="block",E.style.display="none",document.querySelector(".img-placeholder").style.backgroundColor="transparent"},o.readAsDataURL(n)}});l.forEach(t=>{t.addEventListener("click",()=>{l.forEach(n=>n.classList.remove("active")),t.classList.add("active"),m=t.dataset.method})});h.addEventListener("submit",async t=>{t.preventDefault();const n=document.getElementById("product-name").value,o=document.getElementById("price").value,a=document.getElementById("shipping-fee").value,r=document.getElementById("stock").value,s=document.getElementById("product-info").value,d=p.files[0];if(!d)return alert("상품 이미지를 등록해주세요!");if(!n||!o||!a||!r||!s)return alert("모든 정보를 입력해주세요.");const e=new FormData;e.append("name",n),e.append("price",parseInt(o)),e.append("shipping_method",m),e.append("shipping_fee",parseInt(a)),e.append("stock",parseInt(r)),e.append("info",s),e.append("image",d);try{const c=await y("/products/",{method:"POST",body:e});console.log("등록 성공:",c),alert("상품이 성공적으로 등록되었습니다."),window.location.href="/"}catch(c){if(c.data){const u=Object.entries(c.data).map(([g,f])=>`[${g}] ${f}`).join(`
`);alert(`등록 실패:
${u}`)}else alert("알 수 없는 오류가 발생했습니다. 다시 시도해주세요.")}});document.querySelector(".cancel-btn").addEventListener("click",()=>{confirm("작성 중인 내용이 사라집니다. 취소하시겠습니까?")&&window.history.back()});
