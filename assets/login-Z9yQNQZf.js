import{l as i}from"./api-DOepU4-1.js";const d=document.getElementById("loginForm"),c=document.getElementById("username"),o=document.getElementById("password"),t=document.getElementById("errorMessage"),l=document.querySelectorAll(".tab-btn");l.forEach(s=>{s.addEventListener("click",r=>{l.forEach(a=>a.classList.remove("active")),r.target.classList.add("active"),r.target.dataset.type,t.textContent="",t.classList.remove("show")})});d.addEventListener("submit",async s=>{s.preventDefault();const r=c.value.trim(),a=o.value.trim();if(t.textContent="",t.classList.remove("show"),!r){t.textContent="아이디를 입력해주세요.",t.classList.add("show"),c.focus();return}if(!a){t.textContent="비밀번호를 입력해주세요.",t.classList.add("show"),o.focus();return}try{const e=await i(r,a);localStorage.setItem("token",e.access),localStorage.setItem("refreshToken",e.refresh),localStorage.setItem("userType",e.user.user_type),localStorage.setItem("username",e.user.username),localStorage.setItem("name",e.user.name),alert(`${e.user.user_type} 회원으로 로그인되었습니다.`),document.referrer&&document.referrer.indexOf(window.location.host)!==-1?history.back():window.location.href="/"}catch(e){console.error("로그인 에러:",e);let n="로그인 중 오류가 발생했습니다.";e.data&&e.data.error?n=e.data.error:e.message&&e.message!=="API_ERROR"&&(n=e.message),t.textContent=n,t.classList.add("show"),o.value="",o.focus()}});[c,o].forEach(s=>{s.addEventListener("input",()=>{t.classList.contains("show")&&(t.textContent="",t.classList.remove("show"))})});
