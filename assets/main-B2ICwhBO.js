import"./api-CVDx6PwF.js";import{H as m}from"./Header-Cv-hWUqH.js";import{F as d}from"./Footer-DnPTH6_A.js";import"./Modal-CoTgg4te.js";const u="https://api.wenivops.co.kr/services/open-market";let o=0;const l=5;let s,c;async function f(){const e=localStorage.getItem("token");try{const n=await fetch(`${u}/products/`,{method:"GET",headers:{...e&&{Authorization:`Bearer ${e}`},"Content-Type":"application/json"}});if(!n.ok)throw new Error("상품 데이터를 불러오는데 실패했습니다.");const t=await n.json();p(t.results),g(t.results)}catch(n){console.error("Error:",n),s&&(s.innerHTML='<p class="error-message show">상품을 불러올 수 없습니다. 잠시 후 다시 시도해주세요.</p>')}}function p(e){if(!s)return;if(!e||e.length===0){s.innerHTML='<p style="text-align:center; grid-column: 1/-1;">등록된 상품이 없습니다.</p>';return}console.log(e);const n=e.map(t=>{const r=new Intl.NumberFormat("ko-KR").format(t.price);return`
      <li class="product-card">
        <a href="/openMarket/src/pages/product-detail/index.html?productId=${t.id}">
          <img src="${t.image}" alt="${t.name}" class="product-img" />
          <span class="seller-name">${t.seller.store_name||t.seller.username}</span>
          <h3 class="product-name">${t.name}</h3>
          <strong class="product-price">${r}<span>원</span></strong>
        </a>
      </li>
    `}).join("");s.innerHTML=n}function g(e){if(!e||e.length===0||!c)return;const t=e.slice(0,l).map(r=>`<img src="${r.image}" alt="${r.name}" class="banner-img" />`).join("");c.innerHTML=t,h()}function h(){const e=document.querySelector(".prev-btn"),n=document.querySelector(".next-btn"),t=document.querySelectorAll(".dot");if(!e||!n)return;function r(a){a<0?o=l-1:a>=l?o=0:o=a,c&&(c.style.transform=`translateX(-${o*100}%)`),t.forEach(i=>i.classList.remove("active")),t[o]&&t[o].classList.add("active")}e.addEventListener("click",()=>r(o-1)),n.addEventListener("click",()=>r(o+1)),t.forEach((a,i)=>{a.addEventListener("click",()=>r(i))}),setInterval(()=>{r(o+1)},5e3)}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#header");e&&new m(e);const n=document.querySelector("#footer");n&&new d(n),s=document.getElementById("product-grid"),c=document.querySelector(".banner-slide"),s&&f()});
