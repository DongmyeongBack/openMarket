import{l as d}from"./api-CVDx6PwF.js";import{s as m}from"./Modal-Dxb20Ip9.js";const u=document.getElementById("loginForm"),c=document.getElementById("username"),r=document.getElementById("password"),t=document.getElementById("errorMessage"),l=document.querySelectorAll(".tab-btn");l.forEach(o=>{o.addEventListener("click",a=>{l.forEach(n=>n.classList.remove("active")),a.target.classList.add("active"),a.target.dataset.type,t.textContent="",t.classList.remove("show")})});u.addEventListener("submit",async o=>{o.preventDefault();const a=c.value.trim(),n=r.value.trim();if(t.textContent="",t.classList.remove("show"),!a){t.textContent="아이디를 입력해주세요.",t.classList.add("show"),c.focus();return}if(!n){t.textContent="비밀번호를 입력해주세요.",t.classList.add("show"),r.focus();return}try{const e=await d(a,n);localStorage.setItem("token",e.access),localStorage.setItem("refreshToken",e.refresh),localStorage.setItem("userType",e.user.user_type),localStorage.setItem("username",e.user.username),localStorage.setItem("name",e.user.name),await m();const s=document.referrer,i=window.location.host;s&&s.indexOf(i)!==-1&&!s.includes("/login")&&!s.includes("signup")?window.location.href=s:window.location.href="/openMarket/index.html"}catch(e){console.error("로그인 에러:",e);let s="로그인 중 오류가 발생했습니다.";e.data&&e.data.error?s=e.data.error:e.message&&e.message!=="API_ERROR"&&(s=e.message),t.textContent=s,t.classList.add("show"),r.value="",r.focus()}});[c,r].forEach(o=>{o.addEventListener("input",()=>{t.classList.contains("show")&&(t.textContent="",t.classList.remove("show"))})});
