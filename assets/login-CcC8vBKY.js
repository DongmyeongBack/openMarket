import{l as d}from"./api-BW4WmqIz.js";import{s as m}from"./Modal-paOObtiz.js";const u=document.getElementById("loginForm"),c=document.getElementById("username"),a=document.getElementById("password"),e=document.getElementById("errorMessage"),l=document.querySelectorAll(".tab-btn");l.forEach(o=>{o.addEventListener("click",r=>{l.forEach(n=>n.classList.remove("active")),r.target.classList.add("active"),r.target.dataset.type,e.textContent="",e.classList.remove("show")})});u.addEventListener("submit",async o=>{o.preventDefault();const r=c.value.trim(),n=a.value.trim();if(e.textContent="",e.classList.remove("show"),!r){e.textContent="아이디를 입력해주세요.",e.classList.add("show"),c.focus();return}if(!n){e.textContent="비밀번호를 입력해주세요.",e.classList.add("show"),a.focus();return}try{const t=await d(r,n);localStorage.setItem("token",t.access),localStorage.setItem("refreshToken",t.refresh),localStorage.setItem("userType",t.user.user_type),localStorage.setItem("username",t.user.username),localStorage.setItem("name",t.user.name),await m();const s=document.referrer,i=window.location.host;s&&s.indexOf(i)!==-1&&!s.includes("/login")&&!s.includes("signup")?window.location.href=s:window.location.href="/openMarket/index.html"}catch(t){let s="로그인 중 오류가 발생했습니다.";t.data&&t.data.error?s=t.data.error:t.message&&t.message!=="API_ERROR"&&(s=t.message),e.textContent=s,e.classList.add("show"),a.value="",a.focus()}});[c,a].forEach(o=>{o.addEventListener("input",()=>{e.classList.contains("show")&&(e.textContent="",e.classList.remove("show"))})});
