import"./common-D2-4OkSc.js";import{r as d}from"./api-DvCEykNh.js";const l=document.getElementById("loginForm"),c=document.getElementById("username"),r=document.getElementById("password"),t=document.getElementById("errorMessage"),i=document.querySelectorAll(".tab-btn");i.forEach(s=>{s.addEventListener("click",o=>{i.forEach(a=>a.classList.remove("active")),o.target.classList.add("active"),o.target.dataset.type,t.textContent="",t.classList.remove("show")})});l.addEventListener("submit",async s=>{s.preventDefault();const o=c.value.trim(),a=r.value.trim();if(t.textContent="",t.classList.remove("show"),!o){t.textContent="아이디를 입력해주세요.",t.classList.add("show"),c.focus();return}if(!a){t.textContent="비밀번호를 입력해주세요.",t.classList.add("show"),r.focus();return}try{const e=await d("/accounts/login/",{method:"POST",body:JSON.stringify({username:o,password:a})});localStorage.setItem("token",e.access),localStorage.setItem("userType",e.user.user_type),localStorage.setItem("username",e.user.username),localStorage.setItem("name",e.user.name),alert(`${e.user.user_type} 회원으로 로그인되었습니다.`),document.referrer&&document.referrer.indexOf(window.location.host)!==-1?history.back():window.location.href="/"}catch(e){console.error("로그인 에러:",e);let n="로그인 중 오류가 발생했습니다.";e.data&&e.data.error?n=e.data.error:e.message&&e.message!=="API_ERROR"&&(n=e.message),t.textContent=n,t.classList.add("show"),r.value="",r.focus()}});[c,r].forEach(s=>{s.addEventListener("input",()=>{t.classList.contains("show")&&(t.textContent="",t.classList.remove("show"))})});
