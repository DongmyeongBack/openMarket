import{l as d}from"./api-CVDx6PwF.js";const m=document.getElementById("loginForm"),c=document.getElementById("username"),a=document.getElementById("password"),t=document.getElementById("errorMessage"),l=document.querySelectorAll(".tab-btn");l.forEach(o=>{o.addEventListener("click",r=>{l.forEach(n=>n.classList.remove("active")),r.target.classList.add("active"),r.target.dataset.type,t.textContent="",t.classList.remove("show")})});m.addEventListener("submit",async o=>{o.preventDefault();const r=c.value.trim(),n=a.value.trim();if(t.textContent="",t.classList.remove("show"),!r){t.textContent="아이디를 입력해주세요.",t.classList.add("show"),c.focus();return}if(!n){t.textContent="비밀번호를 입력해주세요.",t.classList.add("show"),a.focus();return}try{const e=await d(r,n);localStorage.setItem("token",e.access),localStorage.setItem("refreshToken",e.refresh),localStorage.setItem("userType",e.user.user_type),localStorage.setItem("username",e.user.username),localStorage.setItem("name",e.user.name),alert(`${e.user.user_type} 회원으로 로그인되었습니다.`);const s=document.referrer,i=window.location.host;s&&s.indexOf(i)!==-1&&!s.includes("/login")&&!s.includes("signup")?window.location.href=s:window.location.href="/openMarket/index.html"}catch(e){console.error("로그인 에러:",e);let s="로그인 중 오류가 발생했습니다.";e.data&&e.data.error?s=e.data.error:e.message&&e.message!=="API_ERROR"&&(s=e.message),t.textContent=s,t.classList.add("show"),a.value="",a.focus()}});[c,a].forEach(o=>{o.addEventListener("input",()=>{t.classList.contains("show")&&(t.textContent="",t.classList.remove("show"))})});
